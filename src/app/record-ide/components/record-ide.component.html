<div *ngIf="snakeActive else normalDisplay" class="relative h-full">
    <kern-snake>
    </kern-snake>
</div>
<ng-template #normalDisplay>
    <div *ngIf="project" class="bg-white grid grid-cols-2">
        <div class="h-screen">
            <div class="m-3">
                <span class="mr-4">Editor</span>
                <button (click)="goToLabelingPage()" data-tip="Go to labeling page"
                    class="tooltip tooltip-right hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 bg-white text-gray-700 font-semibold text-xs mr-2 px-4 py-2 rounded-md border border-gray-300">
                    View labeling
                </button>
                <span class="float-right">
                    <button (click)="prevRecord()"
                        class="bg-white text-gray-700 text-xs font-semibold mr-3 px-4 py-2 rounded-md border border-gray-300 whitespace-nowrap hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">Back
                    </button>
                    <button (click)="nextRecord()"
                        class="bg-indigo-700 text-white text-xs font-semibold mr-3 px-4 py-2 rounded-md cursor-pointer whitespace-nowrap hover:bg-indigo-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">Next
                    </button>
                    <span data-tip="Number of the current record in session"
                        class="tooltip tooltip-left border border-0 border-gray-200 inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-medium bg-gray-100 text-gray-800">{{position}}</span></span>
            </div>
            <div>
                <ngx-monaco-editor class="h-screen w-full" [ngStyle]="{'height': screenHeight}"
                    [options]="editorOptions" [(ngModel)]="code" [formControl]="codeFormCtrl">
                </ngx-monaco-editor>
            </div>
        </div>
        <div class="h-screen border-l border-gray-300">
            <div class="flex flex-row m-3 items-center">
                <span class="mr-4">Shell</span>
                <button (click)="runRecordIde()" data-tip="Press Shift + Enter in the editor&#10;to run the code"
                    style="white-space: break-spaces;"
                    class="items-center flex tooltip tooltip-bottom mr-2 px-4 py-2 border border-blue-300 shadow-sm text-xs font-medium rounded-md text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 cursor-pointer">
                    <span>Run</span>
                    <kbd
                        class="h-4 ml-2 uppercase inline-flex items-center border bg-white border-gray-200 rounded px-1 text-sm font-sans font-medium text-gray-400">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrow-big-top"
                            width="16" height="16" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                            fill="none" stroke-linecap="round" stroke-linejoin="round">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                            <path
                                d="M9 20v-8h-3.586a1 1 0 0 1 -.707 -1.707l6.586 -6.586a1 1 0 0 1 1.414 0l6.586 6.586a1 1 0 0 1 -.707 1.707h-3.586v8a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z">
                            </path>
                        </svg>
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrow-back"
                            width="16" height="16" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                            fill="none" stroke-linecap="round" stroke-linejoin="round">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                            <path d="M9 11l-4 4l4 4m-4 -4h11a4 4 0 0 0 0 -8h-1"></path>
                        </svg>
                    </kbd>
                </button>
                <button (click)="clearIde()" data-tip="Clear shell output screen"
                    class="tooltip tooltip-bottom hover:bg-gray-50 bg-white text-gray-700 font-semibold text-xs mr-2 px-4 py-2 rounded-md border border-gray-300">
                    Clear
                </button>
                <button (click)="navigateToTemplates()"
                    class="hover:bg-gray-50 bg-white text-gray-700 font-semibold text-xs mr-2 px-4 py-2 rounded-md border border-gray-300">
                    See function templates
                </button>
                <button (click)="navigateToLibraries()"
                    class="hover:bg-gray-50 bg-white text-gray-700 font-semibold text-xs mr-2 px-4 py-2 rounded-md border border-gray-300">
                    See installed libraries
                </button>
            </div>
            <div *ngIf="!loading" class="ml-2 font-dmMono text-xs whitespace-pre-line">
                <code>
                    {{output}}
                </code>
            </div>
            <div *ngIf="loading" class="h-full flex justify-center items-center">
                <kern-loading size="btn-md"></kern-loading>
            </div>
        </div>
    </div>
</ng-template>